<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Check Image DPI ‚Äì Online Tool</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body { font-family: 'Poppins', sans-serif; background: #F8F4E8; color: #333; margin: 0; }
    .reduce-size-container { max-width: 800px; margin: 3em auto; background: #fff; border-radius: 1.2em; box-shadow: 0 4px 24px #eae3d5; padding: 2.5em 2em 2.5em 2em; }
    .handwritten { font-family: 'Caveat', cursive; }
    .main-btn { font-size: 1.2em; color: #fff; background: #4682B4; padding: 1.2em 2.5em; border-radius: 0.7em; text-decoration: none; font-weight: 700; box-shadow: 0 2px 8px #eae3d5; border: none; cursor: pointer; transition: background 0.2s; margin-top: 2.5em; }
    .main-btn:hover { background: #357abd; }
    .related-links { margin-top: 2em; font-size: 1em; }
    .related-links a { color: #D9534F; text-decoration: underline; margin-right: 1.2em; }
    .related-links a:hover { color: #357abd; }
    .step-list { margin: 1.2em 0 1.2em 1.2em; padding: 0; }
    .step-list li { margin-bottom: 0.7em; }
    .example-section { background: #FDFBF5; border: 1px solid #FFEAA7; border-radius: 0.7em; padding: 1.2em; margin: 2em 0; }
    .example-section h3 { color: #4682B4; margin-bottom: 0.5em; }
    .example-img { max-width: 120px; border-radius: 0.4em; margin: 0.5em; border: 1px solid #eee; }
    .privacy-section { margin: 2em 0; }
    .privacy-section strong { color: #D9534F; }
    .upload-area { border: 3px dashed #D9534F; border-radius: 1em; padding: 3em 2em; text-align: center; margin: 2em 0; background: #FDFBF5; transition: all 0.3s; cursor: pointer; }
    .upload-area:hover { background: #F0F8FF; border-color: #4682B4; }
    .upload-icon { font-size: 3em; color: #D9534F; margin-bottom: 1em; }
    .file-input { display: none; }
    .upload-btn { background: #D9534F; color: #fff; border: none; border-radius: 0.5em; padding: 1em 2em; font-weight: 600; cursor: pointer; transition: all 0.2s; }
    .upload-btn:hover { background: #c9302c; }
    .preview-section { margin-top: 2em; text-align: center; display: none; }
    .preview-section h3 { color: #4682B4; margin-bottom: 1em; }
    .uploaded-preview { max-width: 100%; max-height: 300px; border-radius: 0.5em; margin: 1em 0; border: 2px solid #EAE3D5; }
    .clear-btn { background: #6c757d; color: #fff; border: none; border-radius: 0.5em; padding: 0.8em 1.5em; font-weight: 600; cursor: pointer; transition: all 0.2s; margin: 1em; }
    .clear-btn:hover { background: #5a6268; }
    .dpi-result { margin: 2em 0; background: #FDFBF5; border: 1px solid #FFEAA7; border-radius: 0.7em; padding: 1.2em; text-align: center; font-size: 1.15em; }
    .dpi-result strong { color: #4682B4; }
    @media (max-width: 600px) { .reduce-size-container { padding: 1em 0.2em; } }
  </style>
</head>
<body>
<main>
  <div class="reduce-size-container">
    <header>
      <h1 style="font-family: 'Caveat', cursive; font-size: 3em; color: #FF6B6B; margin-bottom: 0.5em;">Check Image DPI</h1>
      <p style="font-size:1.2em; margin-bottom:1em;">Check the DPI (dots per inch) and dimensions of any image instantly. Perfect for print preparation and digital asset validation. Fast, privacy-first, and free.</p>
    </header>

    <div style="margin-bottom: 1.5em;">
      <span style="color: #666;">Related:</span>
      <a href="../image-compressor.html" style="color: #FF6B6B; text-decoration: none; margin: 0 0.5em;">Image Compressor</a>
      <a href="../image-converter.html" style="color: #FF6B6B; text-decoration: none; margin: 0 0.5em;">Image Converter</a>
      <a href="../resize-image-pixel.html" style="color: #FF6B6B; text-decoration: none; margin: 0 0.5em;">Resize by Pixel</a>
    </div>

    <div style="background:#FFF3CD; border:1px solid #FFD700; border-radius:0.7em; padding:1em; margin-bottom:1.2em; color:#B8860B; font-weight:bold; font-size:1.1em;">
      üìè <b>Instantly check your image's DPI and dimensions.</b> Essential for ensuring print quality, preparing digital assets, and validating image specifications.
    </div>

    <section aria-labelledby="instructions-title" style="background: #F8FBFF; border-radius: 0.7em; padding: 1.5em; margin: 2em 0; border: 1px solid #4682B4;">
      <h2 id="instructions-title" style="color:#4682B4; margin-bottom: 1em; font-size: 1.5em;">How to Use</h2>
      <ol class="step-list" style="margin-left: 1.5em; line-height: 1.6;">
        <li><strong style="color: #4682B4">Upload Your Image:</strong>
          <ul style="margin: 0.5em 0 0.5em 1.5em; color: #666;">
            <li>Drag & drop your image file into the upload area</li>
            <li>Or click "Choose File" to select from your device</li>
            <li>Supports JPEG, PNG, TIFF, and other common formats</li>
          </ul>
        </li>
        <li><strong style="color: #4682B4">View Results:</strong>
          <ul style="margin: 0.5em 0 0.5em 1.5em; color: #666;">
            <li>DPI (Dots Per Inch) value</li>
            <li>Image dimensions in pixels</li>
            <li>Physical print size at current DPI</li>
          </ul>
        </li>
      </ol>
    </section>
    
    <section class="example-section" style="background: #FDFBF5; border: 1px solid #FFEAA7; border-radius: 0.7em; padding: 1.5em; margin: 2em 0;">
      <h3 style="color: #4682B4; margin-bottom: 1em;">DPI Guide & Recommendations</h3>
      
      <div style="margin-bottom: 1.5em;">
        <h4 style="color: #FF6B6B; margin-bottom: 0.5em;">üñ®Ô∏è Common DPI Requirements</h4>
        <ul style="color: #666; margin-left: 1.2em;">
          <li>Web/Digital: 72 DPI</li>
          <li>Standard Print: 300 DPI</li>
          <li>High-Quality Print: 600 DPI</li>
          <li>Professional Photo: 1200+ DPI</li>
        </ul>
      </div>
      
      <div style="margin-bottom: 1.5em;">
        <h4 style="color: #FF6B6B; margin-bottom: 0.5em;">üìÑ Document Types</h4>
        <ul style="color: #666; margin-left: 1.2em;">
          <li>Business Documents: 300 DPI</li>
          <li>Photo Prints: 300-600 DPI</li>
          <li>Magazine Quality: 300+ DPI</li>
          <li>Fine Art Prints: 600+ DPI</li>
        </ul>
      </div>
      
      <div>
        <h4 style="color: #FF6B6B; margin-bottom: 0.5em;">üí° Pro Tips</h4>
        <ul style="color: #666; margin-left: 1.2em;">
          <li>Higher DPI = Better print quality</li>
          <li>Check printer specifications</li>
          <li>Consider viewing distance</li>
          <li>Balance file size with quality needs</li>
        </ul>
      </div>
    </section>
    <section class="privacy-section">
      <h2 style="color:#D9534F;">Privacy Notice</h2>
      <div style="background: #FFF3CD; border: 1px solid #FFEAA7; border-radius: 0.5em; padding: 1em; margin: 1em 0; font-size: 0.95em; color: #856404;">
        <strong>üîí Your files are never uploaded or stored. All processing happens in your browser.</strong>
      </div>
    </section>
    <div class="upload-area" id="upload-area" tabindex="0" aria-label="Upload image area. Drag and drop or click to select an image.">
      <div class="upload-icon" aria-hidden="true">üñºÔ∏è</div>
      <h3>Drag & Drop your image here</h3>
      <p>or click to browse files</p>
      <input type="file" id="file-input" class="file-input" accept="image/*" aria-label="Choose image file">
      <button class="upload-btn" id="choose-file-btn" style="display:block; margin: 0 auto 1.5em auto;" aria-label="Choose File">Choose File</button>
    </div>
    
    <div class="preview-section" id="preview-section">
      <h3>üì∑ Uploaded Image Preview</h3>
      <img id="preview-image" class="uploaded-preview" alt="Uploaded image preview">
      <div style="margin-top: 1em;">
        <button class="clear-btn" id="clear-btn" type="button">üîÑ Upload Different Image</button>
      </div>
    </div>
    
    <div id="dpi-result" class="dpi-result" style="display:none;">
      <div style="margin-top: 1em;">
        <button class="clear-btn" id="result-clear-btn" type="button">üîÑ Check Another Image</button>
      </div>
    </div>

    <div class="feature-list" style="background: #F8F9FA; border-radius: 0.7em; padding: 1.2em; margin: 1.5em 0;">
      <h2 style="color: #4682B4; margin-bottom: 1em;">Key Features</h2>
      <ul>
        <li>üìè Instant DPI detection for any image format</li>
        <li>üìê Shows exact image dimensions (width √ó height)</li>
        <li>üñºÔ∏è Supports JPEG, PNG, GIF, and WEBP formats</li>
        <li>üîí Privacy-focused: no file uploads needed</li>
        <li>‚ö° Lightning-fast results in your browser</li>
        <li>üñ•Ô∏è Works on all devices</li>
        <li>üÜì No registration required</li>
        <li>üé® Perfect for print preparation</li>
      </ul>
    </div>

    <nav class="recent-tools" aria-label="Recently used tools" style="background: #F8F9FA; border-radius: 0.7em; padding: 1.2em; margin: 1.5em 0;">
      <strong>Recent Tools:</strong>
      <div class="recent-tools-list" style="display: inline-block;">
        <a href="/client/tools/image/image-compressor.html">Image Compressor</a>
        <a href="/client/tools/image/resize-image-pixel.html">Resize by Pixel</a>
        <span class="separator" style="margin: 0 0.5em; color: #999;">‚Ä¢</span>
        <a href="#" id="clear-recent" style="color: #D9534F; font-size: 0.9em;">Clear History</a>
      </div>
    </nav>
       
    </section>
  </div>
</main>
<script>
let uploadedImage = null;
const uploadArea = document.getElementById('upload-area');
const fileInput = document.getElementById('file-input');
const chooseFileBtn = document.getElementById('choose-file-btn');
const previewSection = document.getElementById('preview-section');
const previewImage = document.getElementById('preview-image');
const clearBtn = document.getElementById('clear-btn');
const resultClearBtn = document.getElementById('result-clear-btn');
const dpiResult = document.getElementById('dpi-result');

// Clear/Reset function
function clearAll() {
  uploadedImage = null;
  uploadArea.style.display = 'block';
  previewSection.style.display = 'none';
  dpiResult.style.display = 'none';
  fileInput.value = '';
}

// Clear button event listeners
clearBtn.addEventListener('click', clearAll);
resultClearBtn.addEventListener('click', clearAll);
chooseFileBtn.addEventListener('click', (e) => {
  e.preventDefault();
  fileInput.click();
});
uploadArea.addEventListener('click', (e) => {
  if (e.target === uploadArea) {
    fileInput.click();
  }
});
uploadArea.addEventListener('dragover', (e) => {
  e.preventDefault();
  uploadArea.classList.add('dragover');
});
uploadArea.addEventListener('dragleave', () => {
  uploadArea.classList.remove('dragover');
});
uploadArea.addEventListener('drop', (e) => {
  e.preventDefault();
  uploadArea.classList.remove('dragover');
  const files = e.dataTransfer.files;
  if (files.length > 0) {
    handleFile(files[0]);
  }
});
fileInput.addEventListener('change', (e) => {
  if (e.target.files.length > 0) {
    handleFile(e.target.files[0]);
    fileInput.value = '';
  }
});
function handleFile(file) {
  if (!file.type.startsWith('image/')) {
    alert('Please upload a valid image file.');
    return;
  }
  uploadedImage = file;
  
  // Show preview of uploaded image
  previewImage.src = URL.createObjectURL(file);
  uploadArea.style.display = 'none';
  previewSection.style.display = 'block';
  
  // Read DPI and dimensions
  const reader = new FileReader();
  reader.onload = function(e) {
    const arr = new Uint8Array(e.target.result);
    let dpi = '--';
    let width = '--', height = '--';
    // JPEG DPI
    if (file.type === 'image/jpeg') {
      for (let i = 0; i < arr.length - 1; i++) {
        if (arr[i] === 0xFF && arr[i+1] === 0xE0) { // APP0 marker
          let d = i + 13;
          if (arr[d-2] === 0x4A && arr[d-1] === 0x46) { // 'JF'
            dpi = arr[d] * 256 + arr[d+1];
            break;
          }
        }
      }
    }
    // PNG DPI
    if (file.type === 'image/png') {
      for (let i = 0; i < arr.length - 8; i++) {
        if (arr[i] === 0x70 && arr[i+1] === 0x48 && arr[i+2] === 0x59 && arr[i+3] === 0x73) { // pHYs
          let pxPerM = (arr[i+4]<<24) | (arr[i+5]<<16) | (arr[i+6]<<8) | arr[i+7];
          dpi = Math.round(pxPerM / 39.3701);
          break;
        }
      }
    }
    // TIFF DPI support
    if (file.type === 'image/tiff' || file.name.toLowerCase().endsWith('.tiff') || file.name.toLowerCase().endsWith('.tif')) {
      // TIFF files use tags to store DPI information
      // Look for resolution tags: X Resolution (0x011A) and Y Resolution (0x011B)
      const view = new DataView(buffer);
      
      // Check TIFF header and byte order
      const isLittleEndian = view.getUint16(0) === 0x4949; // 'II' for little endian
      
      if (isLittleEndian || view.getUint16(0) === 0x4D4D) { // 'MM' for big endian
        const magic = view.getUint16(2, isLittleEndian);
        if (magic === 42) { // TIFF magic number
          const ifdOffset = view.getUint32(4, isLittleEndian);
          
          if (ifdOffset < buffer.byteLength - 2) {
            const numEntries = view.getUint16(ifdOffset, isLittleEndian);
            
            for (let i = 0; i < numEntries; i++) {
              const entryOffset = ifdOffset + 2 + (i * 12);
              if (entryOffset + 12 <= buffer.byteLength) {
                const tag = view.getUint16(entryOffset, isLittleEndian);
                const type = view.getUint16(entryOffset + 2, isLittleEndian);
                
                if (tag === 0x011A) { // X Resolution
                  let valueOffset = entryOffset + 8;
                  if (type === 5) { // RATIONAL type
                    const dataOffset = view.getUint32(valueOffset, isLittleEndian);
                    if (dataOffset + 8 <= buffer.byteLength) {
                      const numerator = view.getUint32(dataOffset, isLittleEndian);
                      const denominator = view.getUint32(dataOffset + 4, isLittleEndian);
                      dpi = denominator > 0 ? Math.round(numerator / denominator) : 72;
                      break;
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
    // Show image dimensions
    const img = new window.Image();
    img.onload = function() {
      width = img.width;
      height = img.height;
      dpiResult.innerHTML = `<strong>DPI:</strong> ${dpi}<br><strong>Dimensions:</strong> ${width} x ${height} px<div style="margin-top: 1em;"><button class="clear-btn" id="result-clear-btn" type="button">üîÑ Check Another Image</button></div>`;
      dpiResult.style.display = 'block';
      // Re-attach event listener to the new button
      document.getElementById('result-clear-btn').addEventListener('click', clearAll);
    };
    img.src = URL.createObjectURL(file);
  };
  reader.readAsArrayBuffer(file);
}
// Accessibility: allow keyboard upload
uploadArea.addEventListener('keydown', function(e) {
  if (e.key === 'Enter' || e.key === ' ') {
    fileInput.click();
  }
});
</script>
</body>
</html>
