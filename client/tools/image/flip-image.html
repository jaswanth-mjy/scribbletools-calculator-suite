<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Flip Image - FREE Photo Flip & Mirror Tool Online</title>
  <meta name="description" content="Free image flipping tool! Mirror images horizontally, vertically, flip photos instantly. Perfect for selfies, graphics, and photo editing. 100% free!">
  <meta name="keywords" content="flip image tool, image flipper, photo flip, mirror image, flip picture, image mirror tool, photo mirror, horizontal flip, vertical flip, image flip online, picture flipper, photo mirroring, flip photo tool, image reflection tool, mirror photo online, flip jpeg png, image transformation, photo editing tool, reverse image, flip image horizontally, flip image vertically, mirror effect tool, image manipulation tool, photo flip free, picture mirror tool">
  
  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://scribbletools.in/client/tools/image/flip-image.html">
  <meta property="og:title" content="Flip Image - FREE Photo Flip & Mirror Tool Online">
  <meta property="og:description" content="Free image flipping tool! Mirror images horizontally, vertically, flip photos instantly. Perfect for selfies, graphics, and photo editing. 100% free!">
  <meta property="og:image" content="https://scribbletools.in/assets/og-image.svg">
  <meta property="og:site_name" content="Scribble Tools">
  <meta property="og:locale" content="en_US">
  
  <!-- Twitter -->
  <meta property="twitter:card" content="summary_large_image">
  <meta property="twitter:url" content="https://scribbletools.in/client/tools/image/flip-image.html">
  <meta property="twitter:title" content="Flip Image - FREE Photo Flip & Mirror Tool Online">
  <meta property="twitter:description" content="Free image flipping tool! Mirror images horizontally, vertically, flip photos instantly. Perfect for selfies, graphics, and photo editing. 100% free!">
  <meta property="twitter:image" content="https://scribbletools.in/assets/og-image.svg">
  
  <!-- Additional SEO Meta Tags -->
  <meta name="robots" content="index, follow">
  <meta name="author" content="Scribble Tools">
  <meta name="generator" content="Scribble Tools">
  <meta name="application-name" content="Flip Image Tool">
  <meta name="apple-mobile-web-app-title" content="Flip Image">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="theme-color" content="#4682B4">
  <meta name="msapplication-navbutton-color" content="#4682B4">
  <meta name="apple-mobile-web-app-status-bar-style" content="#4682B4">
  
  <!-- Canonical URL -->
  <link rel="canonical" href="https://scribbletools.in/client/tools/image/flip-image.html">
  
  <!-- Preconnect for Performance -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  
  <!-- JSON-LD Structured Data -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebApplication",
    "name": "Flip Image Tool",
    "description": "Free online image flipping tool for mirroring and flipping photos horizontally and vertically. Perfect for photo editing and image manipulation.",
    "url": "https://scribbletools.in/client/tools/image/flip-image.html",
    "applicationCategory": "MultimediaApplication",
    "operatingSystem": "Any",
    "permissions": "browser",
    "offers": {
      "@type": "Offer",
      "price": "0",
      "priceCurrency": "USD"
    },
    "featureList": [
      "Flip images horizontally",
      "Flip images vertically", 
      "Mirror image effects",
      "Multiple image format support",
      "Preview before download",
      "No upload required",
      "Instant processing",
      "Free to use"
    ],
    "provider": {
      "@type": "Organization",
      "name": "Scribble Tools",
      "url": "https://scribbletools.in"
    }
  }
  </script>
  <style>
    .flip-image-tool body { font-family: 'Poppins', sans-serif; background: #F8F4E8; color: #333; margin: 0; }
    .flip-image-tool .reduce-size-container { max-width: 800px; margin: 3em auto; background: #fff; border-radius: 1.2em; box-shadow: 0 4px 24px #eae3d5; padding: 2.5em 2em 2.5em 2em; }
    .flip-image-tool .handwritten { font-family: 'Caveat', cursive; }
    .flip-image-tool .main-btn { font-size: 1.2em; color: #fff; background: #4682B4; padding: 1.2em 2.5em; border-radius: 0.7em; text-decoration: none; font-weight: 700; box-shadow: 0 2px 8px #eae3d5; border: none; cursor: pointer; transition: background 0.2s; margin-top: 2.5em; }
    .flip-image-tool .main-btn:hover { background: #357abd; }
    .flip-image-tool .related-links { margin-top: 2em; font-size: 1em; }
    .flip-image-tool .related-links a { color: #D9534F; text-decoration: underline; margin-right: 1.2em; }
    .flip-image-tool .related-links a:hover { color: #357abd; }
    .flip-image-tool .step-list { margin: 1.2em 0 1.2em 1.2em; padding: 0; }
    .flip-image-tool .step-list li { margin-bottom: 0.7em; }
    .flip-image-tool .example-section { background: #FDFBF5; border: 1px solid #FFEAA7; border-radius: 0.7em; padding: 1.2em; margin: 2em 0; }
    .flip-image-tool .example-section h3 { color: #4682B4; margin-bottom: 0.5em; }
    .flip-image-tool .example-img { max-width: 120px; border-radius: 0.4em; margin: 0.5em; border: 1px solid #eee; }
    .flip-image-tool .privacy-section { margin: 2em 0; }
    .flip-image-tool .privacy-section strong { color: #D9534F; }
    .flip-image-tool .upload-area { border: 3px dashed #D9534F; border-radius: 1em; padding: 3em 2em; text-align: center; margin: 2em 0; background: #FDFBF5; transition: all 0.3s; cursor: pointer; }
    .flip-image-tool .upload-area:hover { background: #F0F8FF; border-color: #4682B4; }
    .flip-image-tool .upload-icon { font-size: 3em; color: #D9534F; margin-bottom: 1em; }
    .flip-image-tool .file-input { display: none; }
    .flip-image-tool .upload-btn { background: #D9534F; color: #fff; border: none; border-radius: 0.5em; padding: 1em 2em; font-weight: 600; cursor: pointer; transition: all 0.2s; }
    .flip-image-tool .upload-btn:hover { background: #c9302c; }
    .flip-image-tool .flip-controls { display: flex; flex-wrap: wrap; gap: 1em; justify-content: center; margin: 2em 0 1em 0; }
    .flip-image-tool .flip-btn { background: #4682B4; color: #fff; border: none; border-radius: 0.5em; padding: 0.8em 1.5em; font-weight: 600; cursor: pointer; transition: all 0.2s; font-size: 1em; }
    .flip-image-tool .flip-btn:hover { background: #357abd; }
    .flip-image-tool .preview-section { text-align: center; margin: 2em 0; }
    .flip-image-tool #preview-canvas { background: #fff; border: 1px solid #EAE3D5; border-radius: 0.7em; box-shadow: 0 2px 8px #eae3d5; margin: 0 auto; display: block; max-width: 100%; }
    .flip-image-tool .download-btn { background: #4682B4; color: #fff; border: none; border-radius: 0.5em; padding: 1em 2em; font-weight: 600; cursor: pointer; transition: all 0.2s; width: 100%; font-size: 1.1em; margin-top: 1.5em; max-width: 300px; }
    .flip-image-tool .download-btn:hover { background: #357abd; }
    @media (max-width: 600px) { .flip-image-tool .reduce-size-container { padding: 1em 0.2em; } .flip-image-tool .flip-controls { flex-direction: column; gap: 0.7em; } }
  </style>
</head>
<body>
<main>
  <div class="flip-image-tool">
  <div class="reduce-size-container">
    <header>
      <h1 class="handwritten text-5xl text-[#D9534F] mb-4">Flip & Rotate Image</h1>
      <p style="font-size:1.2em; margin-bottom:1.2em;">Flip or rotate any photo instantly. Horizontal, vertical, 90°/180° rotation, and more. Fast, privacy-first, and free. No files are stored.</p>
    </header>
    <nav class="related-links" aria-label="Related image tools">
      <strong>Related:</strong>
      <a href="#rotate-image">Rotate Image</a>
      <a href="#image-compressor">Image Compressor</a>
      <a href="#image-converter">Image Converter</a>
    </nav>
      <a href="#image-converter">Image Converter</a>
      <a href="#resize-image-pixel">Resize by Pixel</a>
    </nav>
    <section aria-labelledby="instructions-title" style="background: #F8FBFF; border-radius: 0.7em; padding: 1.5em; margin: 2em 0; border: 1px solid #4682B4;">
      <h2 id="instructions-title" style="color:#4682B4; margin-bottom: 1em; font-size: 1.5em;">How to Use</h2>
      <ol class="step-list" style="margin-left: 1.5em; line-height: 1.6;">
        <li><strong style="color: #4682B4">Upload Your Image:</strong>
          <ul style="margin: 0.5em 0 0.5em 1.5em; color: #666;">
            <li>Drag & drop your photo into the upload area</li>
            <li>Or click "Choose File" to browse</li>
            <li>Supports all common image formats</li>
          </ul>
        </li>
        <li><strong style="color: #4682B4">Transform Your Image:</strong>
          <ul style="margin: 0.5em 0 0.5em 1.5em; color: #666;">
            <li>Flip horizontal or vertical</li>
            <li>Rotate 90° left or right</li>
            <li>Rotate 180° to flip upside down</li>
            <li>See changes instantly in preview</li>
          </ul>
        </li>
        <li><strong style="color: #4682B4">Save Your Result:</strong>
          <ul style="margin: 0.5em 0 0.5em 1.5em; color: #666;">
            <li>Click "Download" to save your image</li>
            <li>Original quality maintained</li>
            <li>Reset anytime to start over</li>
          </ul>
        </li>
      </ol>
    </section>
    
    <section class="example-section" style="background: #FDFBF5; border: 1px solid #FFEAA7; border-radius: 0.7em; padding: 1.5em; margin: 2em 0;">
      <h3 style="color: #4682B4; margin-bottom: 1em;">Common Uses & Tips</h3>
      
      <div style="margin-bottom: 1.5em;">
        <h4 style="color: #FF6B6B; margin-bottom: 0.5em;">📸 Photo Fixes</h4>
        <ul style="color: #666; margin-left: 1.2em;">
          <li>Mirror selfies for natural look</li>
          <li>Fix upside-down photos</li>
          <li>Correct camera orientation</li>
          <li>Create reflection effects</li>
        </ul>
      </div>
      
      <div style="margin-bottom: 1.5em;">
        <h4 style="color: #FF6B6B; margin-bottom: 0.5em;">📄 Document Handling</h4>
        <ul style="color: #666; margin-left: 1.2em;">
            <li>Fix scanned document orientation</li>
            <li>Rotate PDFs and forms</li>
            <li>Align text direction</li>
            <li>Prepare for printing</li>
        </ul>
      </div>
      
      <div>
        <h4 style="color: #FF6B6B; margin-bottom: 0.5em;">💡 Pro Tips</h4>
        <ul style="color: #666; margin-left: 1.2em;">
            <li>Use Reset to undo all changes</li>
            <li>Try different orientations</li>
            <li>Check text readability</li>
            <li>Combine with other image tools</li>
        </ul>
      </div>
    </section>
    <section class="privacy-section">
      <h2 style="color:#D9534F;">Privacy Notice</h2>
      <div style="background: #FFF3CD; border: 1px solid #FFEAA7; border-radius: 0.5em; padding: 1em; margin: 1em 0; font-size: 0.95em; color: #856404;">
        <strong>🔒 Your files are never uploaded or stored. All processing happens in your browser.</strong>
      </div>
    </section>
    <div class="upload-area" id="upload-area" tabindex="0" aria-label="Upload image area. Drag and drop or click to select an image.">
      <div class="upload-icon" aria-hidden="true">🖼️</div>
      <h3>Drag & Drop your image here</h3>
      <p>or click to browse files</p>
      <input type="file" id="file-input" class="file-input" accept="image/*" aria-label="Choose image file">
      <button class="upload-btn" id="choose-file-btn" style="display:block; margin: 0 auto 1.5em auto;" aria-label="Choose File">Choose File</button>
    </div>
    <div class="flip-controls" id="flip-controls" style="display:none;">
      <button class="flip-btn" id="flip-h">Flip Horizontal</button>
      <button class="flip-btn" id="flip-v">Flip Vertical</button>
      <button class="flip-btn" id="rotate-l">Rotate 90° Left</button>
      <button class="flip-btn" id="rotate-r">Rotate 90° Right</button>
      <button class="flip-btn" id="rotate-180">Rotate 180°</button>
      <button class="flip-btn" id="reset">Reset</button>
    </div>
    <div class="preview-section" id="preview-section" style="display:none;">
      <h4 style="color:#228B22; font-size:1.1em; margin-bottom:0.5em;">Live Preview</h4>
      <canvas id="preview-canvas" width="400" height="400"></canvas>
      <button class="download-btn" id="download-btn" type="button">Download Image</button>
    </div>
      </div>
  </div> <!-- Close flip-image-tool wrapper -->
</main>
<script>
// Flip Image Tool - Clean initialization
(function() {
  'use strict';
  
  let originalImage = null;
  let currentImage = null;
  let imgWidth = 0, imgHeight = 0;
  let transform = { flipH: false, flipV: false, rotate: 0 };
  let isInitialized = false;

  // Global initialization function for the main app
  window.initializeFlipImageTool = function() {
    console.log('🔧 Initializing Flip Image tool...');
    reset();
    init();
  };

  function reset() {
    console.log('Resetting flip image tool state...');
    originalImage = null;
    currentImage = null;
    imgWidth = 0;
    imgHeight = 0;
    transform = { flipH: false, flipV: false, rotate: 0 };
    isInitialized = false;
    
    // Reset UI elements
    const uploadArea = document.getElementById('upload-area');
    const flipControls = document.getElementById('flip-controls');
    const previewSection = document.getElementById('preview-section');
    const fileInput = document.getElementById('file-input');
    const previewCanvas = document.getElementById('preview-canvas');
    
    if (uploadArea) uploadArea.style.display = 'block';
    if (flipControls) flipControls.style.display = 'none';
    if (previewSection) previewSection.style.display = 'none';
    if (fileInput) fileInput.value = '';
    
    // Clear canvas
    if (previewCanvas) {
      const ctx = previewCanvas.getContext('2d');
      ctx.clearRect(0, 0, previewCanvas.width, previewCanvas.height);
    }
  }

  function init() {
    if (isInitialized) {
      console.log('Already initialized');
      return;
    }

    console.log('Setting up flip image event listeners...');
    
    // Get elements
    const uploadArea = document.getElementById('upload-area');
    const fileInput = document.getElementById('file-input');
    const chooseFileBtn = document.getElementById('choose-file-btn');
    
    if (!uploadArea || !fileInput || !chooseFileBtn) {
      console.error('Critical elements missing:', {
        uploadArea: !!uploadArea,
        fileInput: !!fileInput,
        chooseFileBtn: !!chooseFileBtn
      });
      setTimeout(init, 100); // Retry
      return;
    }

    // Remove old listeners by cloning
    [uploadArea, fileInput, chooseFileBtn].forEach(el => {
      if (el && el.parentNode) {
        const newEl = el.cloneNode(true);
        el.parentNode.replaceChild(newEl, el);
      }
    });

    // Re-get elements after cloning
    const newUploadArea = document.getElementById('upload-area');
    const newFileInput = document.getElementById('file-input');
    const newChooseFileBtn = document.getElementById('choose-file-btn');

    // Click handlers
    if (newChooseFileBtn) {
      newChooseFileBtn.onclick = function(e) {
        console.log('🖱️ Choose file clicked');
        e.preventDefault();
        newFileInput.click();
      };
    }

    if (newUploadArea) {
      newUploadArea.onclick = function(e) {
        console.log('🖱️ Upload area clicked');
        if (e.target === newUploadArea) {
          newFileInput.click();
        }
      };
    }

    // File input change
    if (newFileInput) {
      newFileInput.onchange = function(e) {
        console.log('📁 File selected:', e.target.files.length);
        if (e.target.files.length > 0) {
          handleFile(e.target.files[0]);
          e.target.value = '';
        }
      };
    }

    // Drag and drop
    if (newUploadArea) {
      newUploadArea.ondragover = function(e) {
        e.preventDefault();
        newUploadArea.style.backgroundColor = '#F0F8FF';
      };

      newUploadArea.ondragleave = function(e) {
        newUploadArea.style.backgroundColor = '#FDFBF5';
      };

      newUploadArea.ondrop = function(e) {
        e.preventDefault();
        newUploadArea.style.backgroundColor = '#FDFBF5';
        const files = e.dataTransfer.files;
        if (files.length > 0) {
          handleFile(files[0]);
        }
      };

      // Keyboard accessibility
      newUploadArea.onkeydown = function(e) {
        if (e.key === 'Enter' || e.key === ' ') {
          newFileInput.click();
        }
      };
    }

    // Setup control buttons
    setupControlButtons();

    isInitialized = true;
    console.log('✅ Flip Image tool initialized successfully');
  }

  function setupControlButtons() {
    const controlIds = ['flip-h', 'flip-v', 'rotate-l', 'rotate-r', 'rotate-180', 'reset'];
    
    controlIds.forEach(id => {
      const btn = document.getElementById(id);
      if (btn && btn.parentNode) {
        const newBtn = btn.cloneNode(true);
        btn.parentNode.replaceChild(newBtn, btn);
      }
    });

    // Re-get elements and add event listeners
    const btnFlipH = document.getElementById('flip-h');
    const btnFlipV = document.getElementById('flip-v');
    const btnRotateL = document.getElementById('rotate-l');
    const btnRotateR = document.getElementById('rotate-r');
    const btnRotate180 = document.getElementById('rotate-180');
    const btnReset = document.getElementById('reset');
    const downloadBtn = document.getElementById('download-btn');

    if (btnFlipH) {
      btnFlipH.onclick = function() {
        transform.flipH = !transform.flipH;
        drawPreview();
      };
    }

    if (btnFlipV) {
      btnFlipV.onclick = function() {
        transform.flipV = !transform.flipV;
        drawPreview();
      };
    }

    if (btnRotateL) {
      btnRotateL.onclick = function() {
        transform.rotate = (transform.rotate - 90) % 360;
        drawPreview();
      };
    }

    if (btnRotateR) {
      btnRotateR.onclick = function() {
        transform.rotate = (transform.rotate + 90) % 360;
        drawPreview();
      };
    }

    if (btnRotate180) {
      btnRotate180.onclick = function() {
        transform.rotate = (transform.rotate + 180) % 360;
        drawPreview();
      };
    }

    if (btnReset) {
      btnReset.onclick = function() {
        resetTransform();
      };
    }

    if (downloadBtn) {
      downloadBtn.onclick = function() {
        downloadImage();
      };
    }
  }

  function handleFile(file) {
    console.log('📷 Processing file:', file.name);
    
    if (!file.type.startsWith('image/')) {
      alert('❌ Please upload a valid image file.');
      return;
    }

    const reader = new FileReader();
    reader.onload = function(e) {
      originalImage = new Image();
      originalImage.onload = function() {
        imgWidth = originalImage.width;
        imgHeight = originalImage.height;
        
        // Show controls and preview
        const uploadArea = document.getElementById('upload-area');
        const flipControls = document.getElementById('flip-controls');
        const previewSection = document.getElementById('preview-section');
        
        if (uploadArea) uploadArea.style.display = 'none';
        if (flipControls) flipControls.style.display = 'flex';
        if (previewSection) previewSection.style.display = 'block';
        
        resetTransform();
        drawPreview();
      };
      originalImage.src = e.target.result;
    };
    reader.readAsDataURL(file);
  }

  function resetTransform() {
    transform = { flipH: false, flipV: false, rotate: 0 };
    drawPreview();
  }

  function drawPreview() {
    if (!originalImage) return;

    const previewCanvas = document.getElementById('preview-canvas');
    if (!previewCanvas) return;

    const previewCtx = previewCanvas.getContext('2d');
    
    // Calculate canvas size based on rotation
    let canvasW = imgWidth, canvasH = imgHeight;
    let rot = ((transform.rotate % 360) + 360) % 360;
    if (rot === 90 || rot === 270) {
      canvasW = imgHeight;
      canvasH = imgWidth;
    }
    
    // Set canvas size with max constraints
    const maxSize = 400;
    const scale = Math.min(maxSize / canvasW, maxSize / canvasH, 1);
    previewCanvas.width = canvasW * scale;
    previewCanvas.height = canvasH * scale;
    
    previewCtx.clearRect(0, 0, previewCanvas.width, previewCanvas.height);
    previewCtx.save();
    
    // Move to center
    previewCtx.translate(previewCanvas.width/2, previewCanvas.height/2);
    
    // Apply rotation
    previewCtx.rotate(rot * Math.PI / 180);
    
    // Apply flips
    previewCtx.scale(transform.flipH ? -1 : 1, transform.flipV ? -1 : 1);
    
    // Draw image
    if (rot === 90 || rot === 270) {
      previewCtx.drawImage(originalImage, -imgHeight*scale/2, -imgWidth*scale/2, imgHeight*scale, imgWidth*scale);
    } else {
      previewCtx.drawImage(originalImage, -imgWidth*scale/2, -imgHeight*scale/2, imgWidth*scale, imgHeight*scale);
    }
    
    previewCtx.restore();
  }

  function downloadImage() {
    if (!originalImage) {
      alert('❌ Please upload an image first.');
      return;
    }
    
    // Create output canvas with original dimensions
    const outCanvas = document.createElement('canvas');
    let outW = imgWidth, outH = imgHeight;
    let rot = ((transform.rotate % 360) + 360) % 360;
    if (rot === 90 || rot === 270) {
      outW = imgHeight;
      outH = imgWidth;
    }
    outCanvas.width = outW;
    outCanvas.height = outH;
    
    const outCtx = outCanvas.getContext('2d');
    outCtx.save();
    
    // Move to center
    outCtx.translate(outW/2, outH/2);
    
    // Apply rotation
    outCtx.rotate(rot * Math.PI / 180);
    
    // Apply flips
    outCtx.scale(transform.flipH ? -1 : 1, transform.flipV ? -1 : 1);
    
    // Draw image
    if (rot === 90 || rot === 270) {
      outCtx.drawImage(originalImage, -imgHeight/2, -imgWidth/2, imgHeight, imgWidth);
    } else {
      outCtx.drawImage(originalImage, -imgWidth/2, -imgHeight/2, imgWidth, imgHeight);
    }
    
    outCtx.restore();
    
    outCanvas.toBlob(function(blob) {
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = 'flipped-image.png';
      document.body.appendChild(a);
      a.click();
      setTimeout(() => {
        document.body.removeChild(a);
        URL.revokeObjectURL(url);
        setTimeout(reset, 2000); // Auto-clear after download
      }, 100);
    }, 'image/png');
  }

  // Auto-initialize if DOM is ready
  if (document.readyState !== 'loading') {
    setTimeout(init, 50);
  } else {
    document.addEventListener('DOMContentLoaded', function() {
      setTimeout(init, 50);
    });
  }

})();
</script>

<section class="feature-list" style="background: #FDFBF5; border-radius: 0.7em; padding: 1.2em; margin: 2em 0; border: 1px solid #FFEAA7;">
  <h2 style="color: #4682B4; margin-bottom: 1em;">Key Features</h2>
  <ul style="list-style: none; padding-left: 0;">
    <li>✓ Flip horizontally or vertically</li>
    <li>✓ Rotate by 90°, 180°, or 270°</li>
    <li>✓ Real-time preview of changes</li>
    <li>✓ Maintains original image quality</li>
    <li>✓ Download in original format</li>
    <li>✓ Works with any image size</li>
  </ul>
</section>
<nav class="recent-tools" aria-label="Recently used tools" style="background: #F8F9FA; border-radius: 0.7em; padding: 1.2em; margin: 1.5em 0;">
  <strong>Recent Tools:</strong>
  <div class="recent-tools-list" style="display: inline-block;">
    <a href="/client/tools/image/black-white-image.html">Black & White Image</a>
    <a href="/client/tools/image/image-color-picker.html">Color Picker</a>
    <a href="/client/tools/image/grayscale-image.html">Grayscale</a>
    <span class="separator" style="margin: 0 0.5em; color: #999;">•</span>
    <a href="#" id="clear-recent" style="color: #D9534F; font-size: 0.9em;">Clear History</a>
  </div>
</nav>

<script>
// Recent tools functionality (shared pattern)
const RECENT_TOOLS_KEY = 'recentImageTools';
const MAX_RECENT_TOOLS = 4;

function initRecentTools() {
  const currentToolData = { name: 'Flip & Rotate Image', url: window.location.pathname };
  addToRecentTools(currentToolData);
  updateRecentToolsList();
  const clearRecentBtn = document.getElementById('clear-recent');
  if (clearRecentBtn) {
    clearRecentBtn.onclick = function(e) {
      e.preventDefault();
      localStorage.removeItem(RECENT_TOOLS_KEY);
      updateRecentToolsList();
    };
  }
}
function addToRecentTools(toolData) {
  let recentTools = JSON.parse(localStorage.getItem(RECENT_TOOLS_KEY) || '[]');
  recentTools = recentTools.filter(tool => tool.url !== toolData.url);
  recentTools.unshift(toolData);
  recentTools = recentTools.slice(0, MAX_RECENT_TOOLS);
  localStorage.setItem(RECENT_TOOLS_KEY, JSON.stringify(recentTools));
}
function updateRecentToolsList() {
  const recentToolsList = document.querySelector('.recent-tools-list');
  if (!recentToolsList) return;
  const recentTools = JSON.parse(localStorage.getItem(RECENT_TOOLS_KEY) || '[]');
  if (recentTools.length === 0) {
    recentToolsList.innerHTML = '<span style="color: #666;">No recent tools</span>';
    return;
  }
  const toolLinks = recentTools
    .filter(tool => tool.url !== window.location.pathname)
    .map(tool => `<a href="${tool.url}">${tool.name}</a>`)
    .join('<span class="separator" style="margin: 0 0.5em; color: #999;">•</span>');
  recentToolsList.innerHTML = toolLinks +
    '<span class="separator" style="margin: 0 0.5em; color: #999;">•</span>' +
    '<a href="#" id="clear-recent" style="color: #D9534F; font-size: 0.9em;">Clear History</a>';
  const clearRecentBtn = document.getElementById('clear-recent');
  if (clearRecentBtn) {
    clearRecentBtn.onclick = function(e) {
      e.preventDefault();
      localStorage.removeItem(RECENT_TOOLS_KEY);
      updateRecentToolsList();
    };
  }
}
if (document.readyState !== 'loading') {
  initRecentTools();
} else {
  document.addEventListener('DOMContentLoaded', initRecentTools);
}
</script>

</body>
</html>
