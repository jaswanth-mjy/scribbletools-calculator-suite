<!-- File: tools/math/exponent-calculator.html -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Exponent/Power Calculator</title>
    <style>
        body { font-family: 'Poppins', sans-serif; background: #F8F4E8; color: #333; }
        .exp-calc-container { max-width: 400px; margin: 3em auto; background: #fff; border-radius: 1.2em; box-shadow: 0 4px 24px #eae3d5; padding: 2em 1.5em 2.5em 1.5em; }
        .handwritten { font-family: 'Caveat', cursive; }
        .exp-calc-label { font-weight: 600; margin-bottom: 0.5em; display: block; }
        .exp-calc-input { width: 100%; padding: 1em; border: 2px solid #EAE3D5; border-radius: 0.7em; font-size: 1.2em; margin-bottom: 1em; background: #FDFBF5; text-align: center; font-family: 'Fira Code', monospace; }
        .exp-calc-btn { background: #fff; color: #D9534F; border: 2px solid #D9534F; border-radius: 0.5em; padding: 0.7em 2em; font-weight: 600; font-size: 1.1em; cursor: pointer; transition: all 0.2s; margin-bottom: 1em; }
        .exp-calc-btn:hover { background: #D9534F; color: #fff; }
        .exp-calc-result { background: #FDFBF5; border: 2px solid #D9534F; border-radius: 0.7em; padding: 1em; font-size: 1.25em; color: #D9534F; min-height: 1.7em; margin-bottom: 1em; text-align: center; font-family: 'Fira Code', monospace; font-weight: bold; max-height: 300px; overflow-y: auto; word-break: break-word; transition: height 0.2s; }
        .exp-calc-desc { width: 100%; margin-top: 2em; background:#FDFBF5; border:2px solid #EAE3D5; border-radius:0.9em; padding:1.2em 1em; font-size:1.08em; color:#333; line-height:1.7; }
        .exp-calc-desc strong { color: #D9534F; font-size: 1.12em; }
        @media (max-width: 600px) { .exp-calc-container { padding: 1em 0.2em; } }
    </style>
</head>
<body>
<div class="exp-calc-container">
    <h2 class="handwritten text-5xl text-[#D9534F] mb-4">Exponent/Power Calculator</h2>
    <label class="exp-calc-label">Enter a base and exponent (e.g. <code>2^8</code>, <code>5^3</code>, or <code>9^0.5</code>):</label>
    <input id="exp-input" class="exp-calc-input" placeholder="e.g. 2^8, 5^3, 9^0.5, or 4^-2">
    <button id="exp-calc-calc" class="exp-calc-btn">Calculate</button>
    <div class="exp-calc-result" id="exp-calc-result"></div>
</div>
<div class="exp-calc-desc" style="max-width: 540px; margin: 2.5em auto 0 auto; background:#FDFBF5; border:2px solid #EAE3D5; border-radius:0.9em; padding:1.2em 1em; font-size:1.08em; color:#333; line-height:1.7;">
    <strong style="font-size:1.18em; color:#D9534F;">About the Exponent/Power Calculator</strong><br><br>
    Enter a base and exponent to instantly calculate the result. Supports positive, negative, and fractional exponents.<br><br>
    <b>Features:</b>
    <ul style="margin-left:1.2em; margin-bottom:0.7em;">
        <li>Calculates any power (e.g. 2^8, 5^3, 9^0.5, 27^(-1/3))</li>
        <li>Supports negative and fractional exponents</li>
        <li>Shows both the exact and decimal result (if possible)</li>
        <li>Responsive, mobile-friendly, and distraction-free</li>
        <li>Instant feedback for invalid input</li>
    </ul>
    <b>Use Cases:</b>
    <ul style="margin-left:1.2em;">
        <li>Calculate squares, cubes, roots, and higher powers</li>
        <li>Check answers for math class or exams</li>
        <li>Evaluate scientific notation (e.g. 1.2e3 = 1.2 × 10^3)</li>
        <li>Physics, engineering, and finance calculations</li>
    </ul>
    <b>Why use this calculator?</b> No ads, no clutter, no tracking—just a beautiful, reliable exponent calculator you can use anywhere.<br>
</div>
<script>
function showResult(str) {
    document.getElementById('exp-calc-result').textContent = str;
}

function parseExponent(expr) {
    // Remove spaces and normalize minus signs
    expr = expr.replace(/\s+/g, '').replace(/−/g, '-');
    
    // Check for different input formats
    if (expr.includes('^')) {
        // Format: base^exponent (e.g., 2^8, 5^-3, 4^0.5)
        const parts = expr.split('^');
        if (parts.length !== 2) {
            throw new Error('Invalid format. Use base^exponent (e.g., 2^8)');
        }
        const base = parseFloat(parts[0]);
        const exponent = parseFloat(parts[1]);
        
        if (isNaN(base) || isNaN(exponent)) {
            throw new Error('Base and exponent must be valid numbers');
        }
        
        return { base, exponent };
    } else if (expr.includes('**')) {
        // Format: base**exponent (e.g., 2**8)
        const parts = expr.split('**');
        if (parts.length !== 2) {
            throw new Error('Invalid format. Use base**exponent (e.g., 2**8)');
        }
        const base = parseFloat(parts[0]);
        const exponent = parseFloat(parts[1]);
        
        if (isNaN(base) || isNaN(exponent)) {
            throw new Error('Base and exponent must be valid numbers');
        }
        
        return { base, exponent };
    } else {
        throw new Error('Please use ^ or ** between base and exponent (e.g., 2^8 or 2**8)');
    }
}

function calculateExponent(base, exponent) {
    // Handle special cases
    if (base === 0 && exponent < 0) {
        throw new Error('Cannot raise 0 to a negative power (division by zero)');
    }
    
    if (base < 0 && !Number.isInteger(exponent)) {
        throw new Error('Cannot raise negative number to non-integer power (complex result)');
    }
    
    const result = Math.pow(base, exponent);
    
    if (!isFinite(result)) {
        if (result === Infinity) {
            throw new Error('Result is too large (infinity)');
        } else if (result === -Infinity) {
            throw new Error('Result is too large (negative infinity)');
        } else {
            throw new Error('Result is not a valid number');
        }
    }
    
    return result;
}

function formatResult(base, exponent, result) {
    let formatted = '';
    
    // Show the original expression
    formatted += `${base}^${exponent} = `;
    
    // Format the result appropriately
    if (Number.isInteger(result) && Math.abs(result) < 1e15) {
        formatted += result.toString();
    } else if (Math.abs(result) < 1e-6 || Math.abs(result) >= 1e15) {
        formatted += result.toExponential(6);
    } else {
        const rounded = Math.round(result * 1e10) / 1e10; // Round to 10 decimal places
        formatted += rounded.toString();
    }
    
    // Add some helpful context for common operations
    if (exponent === 0.5) {
        formatted += ` (square root of ${base})`;
    } else if (exponent === 2) {
        formatted += ` (${base} squared)`;
    } else if (exponent === 3) {
        formatted += ` (${base} cubed)`;
    } else if (exponent === -1) {
        formatted += ` (1/${base})`;
    }
    
    return formatted;
}

document.getElementById('exp-calc-calc').addEventListener('click', function() {
    let expr = document.getElementById('exp-input').value.trim();
    if (!expr) {
        return showResult('Enter a base and exponent (e.g., 2^8 or 5^3)');
    }
    
    try {
        const { base, exponent } = parseExponent(expr);
        const result = calculateExponent(base, exponent);
        const formattedResult = formatResult(base, exponent, result);
        showResult(formattedResult);
    } catch (error) {
        showResult('Error: ' + error.message);
    }
});

document.getElementById('exp-input').addEventListener('keydown', function(e) {
    if (e.key === 'Enter') {
        document.getElementById('exp-calc-calc').click();
    }
});

// Add some example calculations on page load
document.addEventListener('DOMContentLoaded', function() {
    showResult('Enter an expression like 2^8, 5^3, or 9^0.5');
});
</script>
</html>
